"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.schemaForType$template$ = void 0;
const types_1 = require("../types");
const database_1 = require("../database");
let trav = (obj, d) => {
    for (let key of Object.getOwnPropertyNames(obj)) {
        let val = obj[key];
        if (val && typeof val === "object" || Array.isArray(val)) {
            trav(val, d);
        }
        if (typeof val === "string") {
            if (val.startsWith("$enumSource_")) {
                obj[key] = d.getIds(Number(val.replace("$enumSource_", "")));
                obj[key].unshift(database_1.Database.deleteNumber);
            }
        }
    }
    return obj;
};
function schemaForType$template$(type, d) {
    let base = { /*!!!SCHEMA!!!*/};
    trav(base, d);
    base.$ref = `#/definitions/itype_${type}`;
    base.title = types_1.ItemTypesMapRev[type];
    return base;
}
exports.schemaForType$template$ = schemaForType$template$;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NoZW1hLnRlbXBsYXRlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic2NoZW1hLnRlbXBsYXRlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLG9DQUFtRDtBQUNuRCwwQ0FBcUM7QUFFckMsSUFBSSxJQUFJLEdBQUcsQ0FBQyxHQUFRLEVBQUMsQ0FBVSxFQUFFLEVBQUU7SUFDL0IsS0FBSyxJQUFJLEdBQUcsSUFBSSxNQUFNLENBQUMsbUJBQW1CLENBQUMsR0FBRyxDQUFDLEVBQUU7UUFDN0MsSUFBSSxHQUFHLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ25CLElBQUksR0FBRyxJQUFJLE9BQU8sR0FBRyxLQUFLLFFBQVEsSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxFQUFFO1lBQ3RELElBQUksQ0FBQyxHQUFHLEVBQUMsQ0FBQyxDQUFDLENBQUM7U0FDZjtRQUVELElBQUcsT0FBTyxHQUFHLEtBQUcsUUFBUSxFQUFDO1lBQ3JCLElBQUcsR0FBRyxDQUFDLFVBQVUsQ0FBQyxjQUFjLENBQUMsRUFBQztnQkFDOUIsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsY0FBYyxFQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDMUQsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxtQkFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDO2FBQzNDO1NBQ0o7S0FDSjtJQUNELE9BQU8sR0FBRyxDQUFDO0FBQ2YsQ0FBQyxDQUFBO0FBQ0QsU0FBZ0IsdUJBQXVCLENBQUMsSUFBYSxFQUFDLENBQVU7SUFDNUQsSUFBSSxJQUFJLEdBQUcsRUFBQyxnQkFBZ0IsQ0FBUSxDQUFDO0lBQ3JDLElBQUksQ0FBQyxJQUFJLEVBQUMsQ0FBQyxDQUFDLENBQUM7SUFDYixJQUFJLENBQUMsSUFBSSxHQUFDLHVCQUF1QixJQUFJLEVBQUUsQ0FBQztJQUN4QyxJQUFJLENBQUMsS0FBSyxHQUFDLHVCQUFlLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDakMsT0FBTyxJQUFJLENBQUM7QUFDaEIsQ0FBQztBQU5ELDBEQU1DIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtJdGVtVHlwZSwgSXRlbVR5cGVzTWFwUmV2fSBmcm9tIFwiLi4vdHlwZXNcIjtcclxuaW1wb3J0IHtEYXRhYmFzZX0gZnJvbSBcIi4uL2RhdGFiYXNlXCI7XHJcblxyXG5sZXQgdHJhdiA9IChvYmo6IGFueSxkOkRhdGFiYXNlKSA9PiB7XHJcbiAgICBmb3IgKGxldCBrZXkgb2YgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMob2JqKSkge1xyXG4gICAgICAgIGxldCB2YWwgPSBvYmpba2V5XTtcclxuICAgICAgICBpZiAodmFsICYmIHR5cGVvZiB2YWwgPT09IFwib2JqZWN0XCIgfHwgQXJyYXkuaXNBcnJheSh2YWwpKSB7XHJcbiAgICAgICAgICAgIHRyYXYodmFsLGQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYodHlwZW9mIHZhbD09PVwic3RyaW5nXCIpe1xyXG4gICAgICAgICAgICBpZih2YWwuc3RhcnRzV2l0aChcIiRlbnVtU291cmNlX1wiKSl7XHJcbiAgICAgICAgICAgICAgICBvYmpba2V5XT1kLmdldElkcyhOdW1iZXIodmFsLnJlcGxhY2UoXCIkZW51bVNvdXJjZV9cIixcIlwiKSkpO1xyXG4gICAgICAgICAgICAgICAgb2JqW2tleV0udW5zaGlmdChEYXRhYmFzZS5kZWxldGVOdW1iZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG9iajtcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gc2NoZW1hRm9yVHlwZSR0ZW1wbGF0ZSQodHlwZTpJdGVtVHlwZSxkOkRhdGFiYXNlKXtcclxuICAgIGxldCBiYXNlID0gey8qISEhU0NIRU1BISEhKi99IGFzIGFueTtcclxuICAgIHRyYXYoYmFzZSxkKTtcclxuICAgIGJhc2UuJHJlZj1gIy9kZWZpbml0aW9ucy9pdHlwZV8ke3R5cGV9YDtcclxuICAgIGJhc2UudGl0bGU9SXRlbVR5cGVzTWFwUmV2W3R5cGVdO1xyXG4gICAgcmV0dXJuIGJhc2U7XHJcbn0iXX0=